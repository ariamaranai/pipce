{let c=chrome,m=c.contextMenus,f=(a,b)=>b?b.url[0]!="c":a.url[0]!="c"&&c.scripting.executeScript({target:b?{tabId:b.id,frameIds:[a.frameId]}:{tabId:a.id,allFrames:!0},world:"MAIN",func:async()=>{let d=document,v=d.getElementsByTagName("video"),i=v.length;if(i){let r=Array(i);while(r[--i]=v[i].offsetWidth,i);(v=v[r.indexOf(Math.max(...r))]),v!=d.pictureInPictureElement&&v.readyState?(v.disablePictureInPicture=!1,await v.requestPictureInPicture()):d.exitPictureInPicture()}}});c.runtime.onInstalled.addListener(()=>m.create({id:"",title:"Picture in picture",contexts:["video"]})),m.onClicked.addListener(f),c.action.onClicked.addListener(f)}